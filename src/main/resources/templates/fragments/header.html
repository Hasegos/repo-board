<header th:fragment="header" class="header">
    <div class="header__inner">
        <a class="header__logo" th:href="@{/}" aria-label="RepoBoard ํ">
            <img class="header__logo-icon" th:src="@{/images/logo.svg}" alt="๋ฉ์ธ์ผ๋ก ๋์๊ฐ๊ธฐ" />
            <strong class="header__brand">RepoBoard</strong>
        </a>

        <div class="header__menu-mobile">
            <button class="header__menu-button" id="searchToggle" aria-label="๊ฒ์ ์ด๊ธฐ">๐</button>
            <button class="header__menu-button" id="menuToggle" aria-label="๋ฉ๋ด ์ด๊ธฐ">โฐ</button>
        </div>

        <form id="headerSearchForm" th:action="@{/search}" method="Get" class="header__search" >
            <select name="type" class="header__search-type">
                <option value="repositories" selected>Repositories</option>
                <option value="users">Users</option>
            </select>
            <input class="header__search-input"
                   name="q"
                   type="search"
                   placeholder="๋ํฌ์งํ๋ฆฌ, ์ฌ์ฉ์, ํ๊ทธ ๊ฒ์โฆ"
                   aria-label="๊ฒ์" />
        </form>

        <div class="header__nav">
            <a class="header__btn header__btn--ghost" th:href="@{/}">ํ์</a>
            <div class="header__login" th:if="${user != null}">
                <div class="header__user" data-menu-root>
                    <button class="header__user-btn"
                            type="button"
                            aria-haspopup="menu"
                            aria-expanded="false"
                            data-menu-button>
                        <img class="header__avatar"
                             th:src="${user.profile != null ? user.profile.githubAvatarUrl : '/images/github.svg'}"
                             alt="ํ๋กํ ์ด๋ฏธ์ง" />
                        <span class="header__user-name" >์ฌ์ฉ์</span>
                        <span class="header__chevron" aria-hidden="true">โพ</span>
                    </button>

                    <div class="header__menu" role="menu" hidden data-menu>
                        <a role="menuitem" class="header__menu-item"
                           th:href="@{/users/profiles}"
                           >๋ด ํ๋กํ</a>

                        <a role="menuitem" class="header__menu-item"
                           th:href="@{/users/saved/repos}"
                           >์์ฅํ ๋ํฌ</a>

                        <a role="menuitem" class="header__menu-item"
                           th:href="@{/users/settings}"
                           >์ค์</a>

                        <a role="menuitem" class="header__menu-item"
                           th:if="${user != null and user.role.name() == 'ROLE_ADMIN'}"
                           th:href="@{/admin}"
                          >๊ด๋ฆฌ์</a>

                        <div class="header__menu-sep" role="separator"></div>

                        <a role="menuitem" class="header__menu-item"
                           >์ฑํํ๊ธฐ</a>

                        <form th:action="@{/logout}" method="post">
                            <button type="submit" role="menuitem" class="header__menu-item header__menu-item--danger">
                                ๋ก๊ทธ์์
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="header__unLogin" th:if="${user == null}">
                <a class="header__btn header__btn--primary" th:href="@{/users/login}">๋ก๊ทธ์ธ</a>
                <a class="header__btn header__btn--ghost" th:href="@{/users/signup}">ํ์๊ฐ์</a>
            </div>
        </div>

        <div id="mobileMenu" class="header__mobile-menu" >

            <div th:if="${user == null}">
                <a class="header__btn header__btn--primary" th:href="@{/users/login}">๋ก๊ทธ์ธ</a>
                <a class="header__btn header__btn--ghost" th:href="@{/users/signup}">ํ์๊ฐ์</a>
            </div>

            <div class="header__mobile-menu-items" th:if="${user != null}">
                <a th:href="@{/users/profiles}" class="header__btn header__btn--ghost">๋ด ํ๋กํ</a>
                <a th:href="@{/users/saved/repos}" class="header__btn header__btn--ghost">์์ฅํ ๋ํฌ</a>
                <a th:href="@{/users/settings}" class="header__btn header__btn--ghost">์ค์</a>
                <a th:if="${user.role.name() == 'ROLE_ADMIN'}" th:href="@{/admin}" class="header__btn header__btn--ghost">๊ด๋ฆฌ์</a>
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="header__btn header__btn--ghost header__menu-item--danger">๋ก๊ทธ์์</button>
                </form>
            </div>
        </div>
    </div>
    <script defer th:src="@{/js/header.js}"></script>
</header>